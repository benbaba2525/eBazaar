{"ast":null,"code":"var _jsxFileName = \"/Users/ben/Desktop/Class-HW/eBazaar/client/src/product/EditProduct.js\";\nimport React, { Component } from 'react';\nimport auth from './../auth/auth-helper';\nimport Card, { CardActions, CardContent } from 'material-ui/Card';\nimport Button from 'material-ui/Button';\nimport FileUpload from 'material-ui-icons/FileUpload';\nimport TextField from 'material-ui/TextField';\nimport Typography from 'material-ui/Typography';\nimport Icon from 'material-ui/Icon';\nimport Avatar from 'material-ui/Avatar';\nimport PropTypes from 'prop-types';\nimport { withStyles } from 'material-ui/styles';\nimport { read, update } from './api-product.js';\nimport { Link, Redirect } from 'react-router-dom';\n\nconst styles = theme => ({\n  card: {\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 2,\n    maxWidth: 500,\n    paddingBottom: theme.spacing.unit * 2\n  },\n  title: {\n    margin: theme.spacing.unit * 2,\n    color: theme.palette.protectedTitle,\n    fontSize: '1.2em'\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 400\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing.unit * 2\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 'auto'\n  },\n  input: {\n    display: 'none'\n  },\n  filename: {\n    marginLeft: '10px'\n  }\n});\n\nclass EditProduct extends Component {\n  constructor({\n    match\n  }) {\n    super();\n\n    this.componentDidMount = () => {\n      this.productData = new FormData();\n      read({\n        productId: this.match.params.productId\n      }).then(data => {\n        if (data.error) {\n          this.setState({\n            error: data.error\n          });\n        } else {\n          this.setState({\n            id: data._id,\n            name: data.name,\n            description: data.description,\n            category: data.category,\n            quantity: data.quantity,\n            price: data.price\n          });\n        }\n      });\n    };\n\n    this.clickSubmit = () => {\n      const jwt = auth.isAuthenticated();\n      update({\n        shopId: this.match.params.shopId,\n        productId: this.match.params.productId\n      }, {\n        t: jwt.token\n      }, this.productData).then(data => {\n        if (data.error) {\n          this.setState({\n            error: data.error\n          });\n        } else {\n          this.setState({\n            'redirect': true\n          });\n        }\n      });\n    };\n\n    this.handleChange = name => event => {\n      const value = name === 'image' ? event.target.files[0] : event.target.value;\n      this.productData.set(name, value);\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.state = {\n      name: '',\n      description: '',\n      image: '',\n      category: '',\n      quantity: '',\n      price: '',\n      redirect: false,\n      error: ''\n    };\n    this.match = match;\n  }\n\n  render() {\n    const imageUrl = this.state.id ? \"/api/product/image/\".concat(this.state.id, \"?\").concat(new Date().getTime()) : '/api/product/defaultphoto';\n\n    if (this.state.redirect) {\n      return React.createElement(Redirect, {\n        to: '/seller/shop/edit/' + this.match.params.shopId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      });\n    }\n\n    const classes = this.props.classes;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: classes.card,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(CardContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      type: \"headline\",\n      component: \"h2\",\n      className: classes.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Edit Product\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(Avatar, {\n      src: imageUrl,\n      className: classes.bigAvatar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      accept: \"image/*\",\n      onChange: this.handleChange('image'),\n      className: classes.input,\n      id: \"icon-button-file\",\n      type: \"file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"icon-button-file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"raised\",\n      color: \"secondary\",\n      component: \"span\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Change Image\", React.createElement(FileUpload, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }))), \" \", React.createElement(\"span\", {\n      className: classes.filename,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, this.state.image ? this.state.image.name : ''), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"name\",\n      label: \"Name\",\n      className: classes.textField,\n      value: this.state.name,\n      onChange: this.handleChange('name'),\n      margin: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"multiline-flexible\",\n      label: \"Description\",\n      multiline: true,\n      rows: \"3\",\n      value: this.state.description,\n      onChange: this.handleChange('description'),\n      className: classes.textField,\n      margin: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"category\",\n      label: \"Category\",\n      className: classes.textField,\n      value: this.state.category,\n      onChange: this.handleChange('category'),\n      margin: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"quantity\",\n      label: \"Quantity\",\n      className: classes.textField,\n      value: this.state.quantity,\n      onChange: this.handleChange('quantity'),\n      type: \"number\",\n      margin: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"price\",\n      label: \"Price\",\n      className: classes.textField,\n      value: this.state.price,\n      onChange: this.handleChange('price'),\n      type: \"number\",\n      margin: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), this.state.error && React.createElement(Typography, {\n      component: \"p\",\n      color: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      color: \"error\",\n      className: classes.error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"error\"), this.state.error)), React.createElement(CardActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      variant: \"raised\",\n      onClick: this.clickSubmit,\n      className: classes.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Update\"), React.createElement(Link, {\n      to: '/seller/shops/edit/' + this.match.params.shopId,\n      className: classes.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"raised\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Cancel\")))));\n  }\n\n}\n\nEditProduct.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(EditProduct);","map":{"version":3,"sources":["/Users/ben/Desktop/Class-HW/eBazaar/client/src/product/EditProduct.js"],"names":["React","Component","auth","Card","CardActions","CardContent","Button","FileUpload","TextField","Typography","Icon","Avatar","PropTypes","withStyles","read","update","Link","Redirect","styles","theme","card","margin","textAlign","marginTop","spacing","unit","marginBottom","maxWidth","paddingBottom","title","color","palette","protectedTitle","fontSize","error","verticalAlign","textField","marginLeft","marginRight","width","submit","bigAvatar","height","input","display","filename","EditProduct","constructor","match","componentDidMount","productData","FormData","productId","params","then","data","setState","id","_id","name","description","category","quantity","price","clickSubmit","jwt","isAuthenticated","shopId","t","token","handleChange","event","value","target","files","set","state","image","redirect","render","imageUrl","Date","getTime","classes","props","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport auth from './../auth/auth-helper'\nimport Card, { CardActions, CardContent } from 'material-ui/Card'\nimport Button from 'material-ui/Button'\nimport FileUpload from 'material-ui-icons/FileUpload'\nimport TextField from 'material-ui/TextField'\nimport Typography from 'material-ui/Typography'\nimport Icon from 'material-ui/Icon'\nimport Avatar from 'material-ui/Avatar'\nimport PropTypes from 'prop-types'\nimport { withStyles } from 'material-ui/styles'\nimport { read, update } from './api-product.js'\nimport { Link, Redirect } from 'react-router-dom'\n\nconst styles = theme => ({\n  card: {\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 2,\n    maxWidth: 500,\n    paddingBottom: theme.spacing.unit * 2\n  },\n  title: {\n    margin: theme.spacing.unit * 2,\n    color: theme.palette.protectedTitle,\n    fontSize: '1.2em'\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 400\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing.unit * 2\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 'auto'\n  },\n  input: {\n    display: 'none'\n  },\n  filename: {\n    marginLeft: '10px'\n  }\n})\n\nclass EditProduct extends Component {\n  constructor({ match }) {\n    super()\n    this.state = {\n      name: '',\n      description: '',\n      image: '',\n      category: '',\n      quantity: '',\n      price: '',\n      redirect: false,\n      error: ''\n    }\n    this.match = match\n  }\n\n  componentDidMount = () => {\n    this.productData = new FormData()\n    read({\n      productId: this.match.params.productId\n    }).then((data) => {\n      if (data.error) {\n        this.setState({ error: data.error })\n      } else {\n        this.setState({ id: data._id, name: data.name, description: data.description, category: data.category, quantity: data.quantity, price: data.price })\n      }\n    })\n  }\n  clickSubmit = () => {\n    const jwt = auth.isAuthenticated()\n    update({\n      shopId: this.match.params.shopId,\n      productId: this.match.params.productId\n    }, {\n        t: jwt.token\n      }, this.productData).then((data) => {\n        if (data.error) {\n          this.setState({ error: data.error })\n        } else {\n          this.setState({ 'redirect': true })\n        }\n      })\n  }\n  handleChange = name => event => {\n    const value = name === 'image'\n      ? event.target.files[0]\n      : event.target.value\n    this.productData.set(name, value)\n    this.setState({ [name]: value })\n  }\n\n  render() {\n    const imageUrl = this.state.id\n      ? `/api/product/image/${this.state.id}?${new Date().getTime()}`\n      : '/api/product/defaultphoto'\n    if (this.state.redirect) {\n      return (<Redirect to={'/seller/shop/edit/' + this.match.params.shopId} />)\n    }\n    const { classes } = this.props\n    return (<div>\n      <Card className={classes.card}>\n        <CardContent>\n          <Typography type=\"headline\" component=\"h2\" className={classes.title}>\n            Edit Product\n          </Typography><br />\n          <Avatar src={imageUrl} className={classes.bigAvatar} /><br />\n          <input accept=\"image/*\" onChange={this.handleChange('image')} className={classes.input} id=\"icon-button-file\" type=\"file\" />\n          <label htmlFor=\"icon-button-file\">\n            <Button variant=\"raised\" color=\"secondary\" component=\"span\">\n              Change Image\n              <FileUpload />\n            </Button>\n          </label> <span className={classes.filename}>{this.state.image ? this.state.image.name : ''}</span><br />\n          <TextField id=\"name\" label=\"Name\" className={classes.textField} value={this.state.name} onChange={this.handleChange('name')} margin=\"normal\" /><br />\n          <TextField\n            id=\"multiline-flexible\"\n            label=\"Description\"\n            multiline\n            rows=\"3\"\n            value={this.state.description}\n            onChange={this.handleChange('description')}\n            className={classes.textField}\n            margin=\"normal\"\n          /><br />\n          <TextField id=\"category\" label=\"Category\" className={classes.textField} value={this.state.category} onChange={this.handleChange('category')} margin=\"normal\" /><br />\n          <TextField id=\"quantity\" label=\"Quantity\" className={classes.textField} value={this.state.quantity} onChange={this.handleChange('quantity')} type=\"number\" margin=\"normal\" /><br />\n          <TextField id=\"price\" label=\"Price\" className={classes.textField} value={this.state.price} onChange={this.handleChange('price')} type=\"number\" margin=\"normal\" /><br />\n          {\n            this.state.error && (<Typography component=\"p\" color=\"error\">\n              <Icon color=\"error\" className={classes.error}>error</Icon>\n              {this.state.error}</Typography>)\n          }\n        </CardContent>\n        <CardActions>\n          <Button color=\"primary\" variant=\"raised\" onClick={this.clickSubmit} className={classes.submit}>Update</Button>\n          <Link to={'/seller/shops/edit/' + this.match.params.shopId} className={classes.submit}><Button variant=\"raised\">Cancel</Button></Link>\n        </CardActions>\n      </Card>\n    </div>)\n  }\n}\n\nEditProduct.propTypes = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles)(EditProduct)"]},"metadata":{},"sourceType":"module"}