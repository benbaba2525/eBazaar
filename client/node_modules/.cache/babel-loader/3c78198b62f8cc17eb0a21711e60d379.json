{"ast":null,"code":"var _jsxFileName = \"/Users/ben/Desktop/Class-HW/eBazaar/client/src/shop/MyShops.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from 'material-ui/styles';\nimport Paper from 'material-ui/Paper';\nimport List, { ListItem, ListItemAvatar, ListItemSecondaryAction, ListItemText } from 'material-ui/List';\nimport Avatar from 'material-ui/Avatar';\nimport IconButton from 'material-ui/IconButton';\nimport Icon from 'material-ui/Icon';\nimport Button from 'material-ui/Button';\nimport Typography from 'material-ui/Typography';\nimport Edit from 'material-ui-icons/Edit';\nimport Divider from 'material-ui/Divider';\nimport auth from './../auth/auth-helper';\nimport { listByOwner } from './api-shop.js';\nimport { Redirect, Link } from 'react-router-dom';\nimport DeleteShop from './DeleteShop';\n\nconst styles = theme => ({\n  root: theme.mixins.gutters({\n    maxWidth: 600,\n    margin: 'auto',\n    padding: theme.spacing.unit * 3,\n    marginTop: theme.spacing.unit * 5\n  }),\n  title: {\n    margin: \"\".concat(theme.spacing.unit * 3, \"px 0 \").concat(theme.spacing.unit * 3, \"px \").concat(theme.spacing.unit, \"px\"),\n    color: theme.palette.protectedTitle,\n    fontSize: '1.2em'\n  },\n  addButton: {\n    float: 'right'\n  },\n  leftIcon: {\n    marginRight: \"8px\"\n  }\n});\n\nclass MyShops extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      shops: [],\n      redirectToSignin: false\n    };\n\n    this.loadShops = () => {\n      const jwt = auth.isAuthenticated();\n      listByOwner({\n        userId: jwt.user._id\n      }, {\n        t: jwt.token\n      }).then(data => {\n        if (data.error) {\n          this.setState({\n            redirectToSignin: true\n          });\n        } else {\n          this.setState({\n            shops: data\n          });\n        }\n      });\n    };\n\n    this.removeShop = shop => {\n      const updatedShops = this.state.shops;\n      const index = updatedShops.indexOf(shop);\n      updatedShops.splice(index, 1);\n      this.setState({\n        shops: updatedShops\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.loadShops();\n    };\n  }\n\n  render() {\n    const classes = this.props.classes;\n    const logoUrl = this.state.id ? \"/api/shops/logo/\".concat(this.state.id, \"?\").concat(new Date().getTime()) : '/api/shops/defaultphoto';\n    const redirectToSignin = this.state.redirectToSignin;\n\n    if (redirectToSignin) {\n      return React.createElement(Redirect, {\n        to: \"/signin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: classes.root,\n      elevation: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      type: \"title\",\n      className: classes.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Your Shops\", React.createElement(\"span\", {\n      className: classes.addButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Link, {\n      style: {\n        textDecoration: 'none'\n      },\n      to: \"/seller/shop/new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      variant: \"raised\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      className: classes.leftIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"add_box\"), \"  New Shop\")))), React.createElement(List, {\n      dense: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, this.state.shops.map((shop, i) => {\n      return React.createElement(\"span\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(ListItem, {\n        button: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(ListItemAvatar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        src: logoUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: shop.name,\n        secondary: shop.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), auth.isAuthenticated().user && auth.isAuthenticated().user._id === shop.owner._id && React.createElement(ListItemSecondaryAction, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/seller/shop/edit/\" + shop._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-label\": \"Edit\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Edit, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }))), React.createElement(DeleteShop, {\n        shop: shop,\n        onRemove: this.removeShop,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }))), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }));\n    }))));\n  }\n\n}\n\nMyShops.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(MyShops);","map":{"version":3,"sources":["/Users/ben/Desktop/Class-HW/eBazaar/client/src/shop/MyShops.js"],"names":["React","Component","PropTypes","withStyles","Paper","List","ListItem","ListItemAvatar","ListItemSecondaryAction","ListItemText","Avatar","IconButton","Icon","Button","Typography","Edit","Divider","auth","listByOwner","Redirect","Link","DeleteShop","styles","theme","root","mixins","gutters","maxWidth","margin","padding","spacing","unit","marginTop","title","color","palette","protectedTitle","fontSize","addButton","float","leftIcon","marginRight","MyShops","state","shops","redirectToSignin","loadShops","jwt","isAuthenticated","userId","user","_id","t","token","then","data","error","setState","removeShop","shop","updatedShops","index","indexOf","splice","componentDidMount","render","classes","props","logoUrl","id","Date","getTime","textDecoration","map","i","name","description","owner","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from 'material-ui/styles'\nimport Paper from 'material-ui/Paper'\nimport List, { ListItem, ListItemAvatar, ListItemSecondaryAction, ListItemText } from 'material-ui/List'\nimport Avatar from 'material-ui/Avatar'\nimport IconButton from 'material-ui/IconButton'\nimport Icon from 'material-ui/Icon'\nimport Button from 'material-ui/Button'\nimport Typography from 'material-ui/Typography'\nimport Edit from 'material-ui-icons/Edit'\nimport Divider from 'material-ui/Divider'\nimport auth from './../auth/auth-helper'\nimport { listByOwner } from './api-shop.js'\nimport { Redirect, Link } from 'react-router-dom'\nimport DeleteShop from './DeleteShop'\n\nconst styles = theme => ({\n  root: theme.mixins.gutters({\n    maxWidth: 600,\n    margin: 'auto',\n    padding: theme.spacing.unit * 3,\n    marginTop: theme.spacing.unit * 5\n  }),\n  title: {\n    margin: `${theme.spacing.unit * 3}px 0 ${theme.spacing.unit * 3}px ${theme.spacing.unit}px`,\n    color: theme.palette.protectedTitle,\n    fontSize: '1.2em'\n  },\n  addButton: {\n    float: 'right'\n  },\n  leftIcon: {\n    marginRight: \"8px\"\n  }\n})\nclass MyShops extends Component {\n  state = {\n    shops: [],\n    redirectToSignin: false\n  }\n\n  loadShops = () => {\n    const jwt = auth.isAuthenticated()\n    listByOwner({\n      userId: jwt.user._id\n    }, { t: jwt.token }).then((data) => {\n      if (data.error) {\n        this.setState({ redirectToSignin: true })\n      } else {\n        this.setState({ shops: data })\n      }\n    })\n  }\n  removeShop = (shop) => {\n    const updatedShops = this.state.shops\n    const index = updatedShops.indexOf(shop)\n    updatedShops.splice(index, 1)\n    this.setState({ shops: updatedShops })\n  }\n  componentDidMount = () => {\n    this.loadShops()\n  }\n  render() {\n    const { classes } = this.props\n    const logoUrl = this.state.id\n      ? `/api/shops/logo/${this.state.id}?${new Date().getTime()}`\n      : '/api/shops/defaultphoto'\n    const redirectToSignin = this.state.redirectToSignin\n    if (redirectToSignin) {\n      return <Redirect to='/signin' />\n    }\n    return (\n      <div>\n        <Paper className={classes.root} elevation={4}>\n          <Typography type=\"title\" className={classes.title}>\n            Your Shops\n          <span className={classes.addButton}>\n              <Link style={{ textDecoration: 'none' }} to=\"/seller/shop/new\">\n                <Button color=\"primary\" variant=\"raised\">\n                  <Icon className={classes.leftIcon}>add_box</Icon>  New Shop\n              </Button>\n              </Link>\n            </span>\n          </Typography>\n          <List dense>\n            {this.state.shops.map((shop, i) => {\n              return <span key={i}>\n                <ListItem button>\n                  <ListItemAvatar>\n                    <Avatar src={logoUrl} />\n                  </ListItemAvatar>\n                  <ListItemText primary={shop.name} secondary={shop.description} />\n                  {auth.isAuthenticated().user && auth.isAuthenticated().user._id === shop.owner._id &&\n                    (<ListItemSecondaryAction>\n                      <Link to={\"/seller/shop/edit/\" + shop._id}>\n                        <IconButton aria-label=\"Edit\" color=\"primary\">\n                          <Edit />\n                        </IconButton>\n                      </Link>\n                      <DeleteShop shop={shop} onRemove={this.removeShop} />\n                    </ListItemSecondaryAction>)\n                  }\n                </ListItem>\n                <Divider />\n              </span>\n            })}\n          </List>\n        </Paper>\n      </div>)\n  }\n}\nMyShops.propTypes = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles)(MyShops)"]},"metadata":{},"sourceType":"module"}