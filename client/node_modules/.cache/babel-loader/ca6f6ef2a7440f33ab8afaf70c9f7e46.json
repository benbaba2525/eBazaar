{"ast":null,"code":"var _jsxFileName = \"/Users/ben/Desktop/Class-HW/eBazaar/client/src/shop/EditShop.js\";\nimport React, { Component } from 'react';\nimport auth from './../auth/auth-helper';\nimport Card, { CardActions, CardContent } from 'material-ui/Card';\nimport Button from 'material-ui/Button';\nimport FileUpload from 'material-ui-icons/FileUpload';\nimport TextField from 'material-ui/TextField';\nimport Typography from 'material-ui/Typography';\nimport Icon from 'material-ui/Icon';\nimport Avatar from 'material-ui/Avatar';\nimport PropTypes from 'prop-types';\nimport { withStyles } from 'material-ui/styles';\nimport { read, update } from './api-shop.js';\nimport { Redirect } from 'react-router-dom';\nimport Grid from 'material-ui/Grid';\nimport MyProducts from '../product/MyProducts';\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    margin: 30\n  },\n  card: {\n    textAlign: 'center',\n    paddingBottom: theme.spacing.unit * 2\n  },\n  title: {\n    margin: theme.spacing.unit * 2,\n    color: theme.palette.protectedTitle,\n    fontSize: '1.2em'\n  },\n  subheading: {\n    marginTop: theme.spacing.unit * 2,\n    color: theme.palette.openTitle\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 400\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing.unit * 2\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 'auto'\n  },\n  input: {\n    display: 'none'\n  },\n  filename: {\n    marginLeft: '10px'\n  }\n});\n\nclass EditShop extends Component {\n  constructor({\n    match\n  }) {\n    super();\n\n    this.componentDidMount = () => {\n      this.shopData = new FormData();\n      const jwt = auth.isAuthenticated();\n      read({\n        shopId: this.match.params.shopId\n      }, {\n        t: jwt.token\n      }).then(data => {\n        if (data.error) {\n          this.setState({\n            error: data.error\n          });\n        } else {\n          this.setState({\n            id: data._id,\n            name: data.name,\n            description: data.description,\n            owner: data.owner.name\n          });\n        }\n      });\n    };\n\n    this.clickSubmit = () => {\n      const jwt = auth.isAuthenticated();\n      update({\n        shopId: this.match.params.shopId\n      }, {\n        t: jwt.token\n      }, this.shopData).then(data => {\n        if (data.error) {\n          this.setState({\n            error: data.error\n          });\n        } else {\n          this.setState({\n            'redirect': true\n          });\n        }\n      });\n    };\n\n    this.handleChange = name => event => {\n      const value = name === 'image' ? event.target.files[0] : event.target.value;\n      this.shopData.set(name, value);\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.state = {\n      name: '',\n      description: '',\n      image: '',\n      redirect: false,\n      error: ''\n    };\n    this.match = match;\n  }\n\n  render() {\n    const logoUrl = this.state.id ? \"/api/shops/logo/\".concat(this.state.id, \"?\").concat(new Date().getTime()) : '/api/shops/defaultphoto';\n\n    if (this.state.redirect) {\n      return React.createElement(Redirect, {\n        to: '/seller/shops',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      });\n    }\n\n    const classes = this.props.classes;\n    return React.createElement(\"div\", {\n      className: classes.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      sm: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: classes.card,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(CardContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      type: \"headline\",\n      component: \"h2\",\n      className: classes.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Edit Shop\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(Avatar, {\n      src: logoUrl,\n      className: classes.bigAvatar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      accept: \"image/*\",\n      onChange: this.handleChange('image'),\n      className: classes.input,\n      id: \"icon-button-file\",\n      type: \"file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"icon-button-file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"raised\",\n      color: \"default\",\n      component: \"span\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Change Logo\", React.createElement(FileUpload, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }))), \" \", React.createElement(\"span\", {\n      className: classes.filename,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, this.state.image ? this.state.image.name : ''), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"name\",\n      label: \"Name\",\n      className: classes.textField,\n      value: this.state.name,\n      onChange: this.handleChange('name'),\n      margin: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      id: \"multiline-flexible\",\n      label: \"Description\",\n      multiline: true,\n      rows: \"3\",\n      value: this.state.description,\n      onChange: this.handleChange('description'),\n      className: classes.textField,\n      margin: \"normal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      type: \"subheading\",\n      component: \"h4\",\n      className: classes.subheading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Owner: \", this.state.owner), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), this.state.error && React.createElement(Typography, {\n      component: \"p\",\n      color: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      color: \"error\",\n      className: classes.error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"error\"), this.state.error)), React.createElement(CardActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      variant: \"raised\",\n      onClick: this.clickSubmit,\n      className: classes.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Update\")))), React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      sm: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(MyProducts, {\n      shopId: this.match.params.shopId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nEditShop.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(EditShop);","map":{"version":3,"sources":["/Users/ben/Desktop/Class-HW/eBazaar/client/src/shop/EditShop.js"],"names":["React","Component","auth","Card","CardActions","CardContent","Button","FileUpload","TextField","Typography","Icon","Avatar","PropTypes","withStyles","read","update","Redirect","Grid","MyProducts","styles","theme","root","flexGrow","margin","card","textAlign","paddingBottom","spacing","unit","title","color","palette","protectedTitle","fontSize","subheading","marginTop","openTitle","error","verticalAlign","textField","marginLeft","marginRight","width","submit","marginBottom","bigAvatar","height","input","display","filename","EditShop","constructor","match","componentDidMount","shopData","FormData","jwt","isAuthenticated","shopId","params","t","token","then","data","setState","id","_id","name","description","owner","clickSubmit","handleChange","event","value","target","files","set","state","image","redirect","render","logoUrl","Date","getTime","classes","props","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport auth from './../auth/auth-helper'\nimport Card, { CardActions, CardContent } from 'material-ui/Card'\nimport Button from 'material-ui/Button'\nimport FileUpload from 'material-ui-icons/FileUpload'\nimport TextField from 'material-ui/TextField'\nimport Typography from 'material-ui/Typography'\nimport Icon from 'material-ui/Icon'\nimport Avatar from 'material-ui/Avatar'\nimport PropTypes from 'prop-types'\nimport { withStyles } from 'material-ui/styles'\nimport { read, update } from './api-shop.js'\nimport { Redirect } from 'react-router-dom'\nimport Grid from 'material-ui/Grid'\nimport MyProducts from '../product/MyProducts'\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    margin: 30,\n  },\n  card: {\n    textAlign: 'center',\n    paddingBottom: theme.spacing.unit * 2\n  },\n  title: {\n    margin: theme.spacing.unit * 2,\n    color: theme.palette.protectedTitle,\n    fontSize: '1.2em'\n  },\n  subheading: {\n    marginTop: theme.spacing.unit * 2,\n    color: theme.palette.openTitle\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 400\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing.unit * 2\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 'auto'\n  },\n  input: {\n    display: 'none'\n  },\n  filename: {\n    marginLeft: '10px'\n  }\n})\n\nclass EditShop extends Component {\n  constructor({ match }) {\n    super()\n    this.state = {\n      name: '',\n      description: '',\n      image: '',\n      redirect: false,\n      error: ''\n    }\n    this.match = match\n  }\n\n  componentDidMount = () => {\n    this.shopData = new FormData()\n    const jwt = auth.isAuthenticated()\n    read({\n      shopId: this.match.params.shopId\n    }, { t: jwt.token }).then((data) => {\n      if (data.error) {\n        this.setState({ error: data.error })\n      } else {\n        this.setState({ id: data._id, name: data.name, description: data.description, owner: data.owner.name })\n      }\n    })\n  }\n  clickSubmit = () => {\n    const jwt = auth.isAuthenticated()\n    update({\n      shopId: this.match.params.shopId\n    }, {\n        t: jwt.token\n      }, this.shopData).then((data) => {\n        if (data.error) {\n          this.setState({ error: data.error })\n        } else {\n          this.setState({ 'redirect': true })\n        }\n      })\n  }\n  handleChange = name => event => {\n    const value = name === 'image'\n      ? event.target.files[0]\n      : event.target.value\n    this.shopData.set(name, value)\n    this.setState({ [name]: value })\n  }\n\n  render() {\n    const logoUrl = this.state.id\n      ? `/api/shops/logo/${this.state.id}?${new Date().getTime()}`\n      : '/api/shops/defaultphoto'\n    if (this.state.redirect) {\n      return (<Redirect to={'/seller/shops'} />)\n    }\n    const { classes } = this.props\n    return (<div className={classes.root}>\n      <Grid container spacing={24}>\n        <Grid item xs={6} sm={6}>\n          <Card className={classes.card}>\n            <CardContent>\n              <Typography type=\"headline\" component=\"h2\" className={classes.title}>\n                Edit Shop\n              </Typography>\n              <br />\n              <Avatar src={logoUrl} className={classes.bigAvatar} /><br />\n              <input accept=\"image/*\" onChange={this.handleChange('image')} className={classes.input} id=\"icon-button-file\" type=\"file\" />\n              <label htmlFor=\"icon-button-file\">\n                <Button variant=\"raised\" color=\"default\" component=\"span\">\n                  Change Logo\n                  <FileUpload />\n                </Button>\n              </label> <span className={classes.filename}>{this.state.image ? this.state.image.name : ''}</span><br />\n              <TextField id=\"name\" label=\"Name\" className={classes.textField} value={this.state.name} onChange={this.handleChange('name')} margin=\"normal\" /><br />\n              <TextField\n                id=\"multiline-flexible\"\n                label=\"Description\"\n                multiline\n                rows=\"3\"\n                value={this.state.description}\n                onChange={this.handleChange('description')}\n                className={classes.textField}\n                margin=\"normal\"\n              /><br />\n              <Typography type=\"subheading\" component=\"h4\" className={classes.subheading}>\n                Owner: {this.state.owner}\n              </Typography><br />\n              {\n                this.state.error && (<Typography component=\"p\" color=\"error\">\n                  <Icon color=\"error\" className={classes.error}>error</Icon>\n                  {this.state.error}\n                </Typography>)\n              }\n            </CardContent>\n            <CardActions>\n              <Button color=\"primary\" variant=\"raised\" onClick={this.clickSubmit} className={classes.submit}>Update</Button>\n            </CardActions>\n          </Card>\n        </Grid>\n        <Grid item xs={6} sm={6}>\n          <MyProducts shopId={this.match.params.shopId} />\n        </Grid>\n      </Grid>\n    </div>)\n  }\n}\n\nEditShop.propTypes = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles)(EditShop)"]},"metadata":{},"sourceType":"module"}